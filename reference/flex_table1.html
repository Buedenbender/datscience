<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="A convenience function, that provides and easy wrapper for the
  two main enginges of the function
table1 provides a nice API given a
      formula to create demographics tables. I basically just advanced the
      functionality of the p-value function to also be able to run for
      multiple groups (ANOVA), added the possibility
      to correct p-values with either Bonferroni or Sidark, and set some
      sensible defaults to achieve a nice look
flextable which gives all the power
      to format the table as you please (e.g., conditional formatting
      -&amp;gt;adding bold for p values below .05), adding italic headers or notes
      explaining what was done.


Really all credit should go to these two packages their developers.
    My function just provides an easy to use API or wrapper around their
    packages to get a beautiful publication ready bivariate comparison
    Table 1."><title>Creates a Descriptive Bivariate Table1 Ready for Publication — flex_table1 • datscience</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creates a Descriptive Bivariate Table1 Ready for Publication — flex_table1"><meta property="og:description" content="A convenience function, that provides and easy wrapper for the
  two main enginges of the function
table1 provides a nice API given a
      formula to create demographics tables. I basically just advanced the
      functionality of the p-value function to also be able to run for
      multiple groups (ANOVA), added the possibility
      to correct p-values with either Bonferroni or Sidark, and set some
      sensible defaults to achieve a nice look
flextable which gives all the power
      to format the table as you please (e.g., conditional formatting
      -&amp;gt;adding bold for p values below .05), adding italic headers or notes
      explaining what was done.


Really all credit should go to these two packages their developers.
    My function just provides an easy to use API or wrapper around their
    packages to get a beautiful publication ready bivariate comparison
    Table 1."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">datscience</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/ScreePlot_ConfidenceIntervalls_ForObservedEigenvalues.html">Pretty Scree Plot with CIs for Eigenvalues </a>
    <a class="dropdown-item" href="../articles/flex_table1.html">A Guide to Bivariate Table 1</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Buedenbender/datscience/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Creates a Descriptive Bivariate Table1 Ready for Publication</h1>
      <small class="dont-index">Source: <a href="https://github.com/Buedenbender/datscience/blob/HEAD/R/flex_table1.R" class="external-link"><code>R/flex_table1.R</code></a></small>
      <div class="d-none name"><code>flex_table1.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A convenience function, that provides and easy wrapper for the
  two main enginges of the function</p><ul><li><p><code><a href="https://rdrr.io/pkg/table1/man/table1.html" class="external-link">table1</a></code> provides a nice API given a
      formula to create demographics tables. I basically just advanced the
      functionality of the p-value function to also be able to run for
      multiple groups (ANOVA), added the possibility
      to correct p-values with either Bonferroni or Sidark, and set some
      sensible defaults to achieve a nice look</p></li>
<li><p><code><a href="https://davidgohel.github.io/flextable/reference/flextable.html" class="external-link">flextable</a></code> which gives all the power
      to format the table as you please (e.g., conditional formatting
      -&gt;adding bold for p values below .05), adding italic headers or notes
      explaining what was done.</p></li>
</ul><p>Really all credit should go to these two packages their developers.
    My function just provides an easy to use API or wrapper around their
    packages to get a beautiful publication ready bivariate comparison
    Table 1.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">flex_table1</span><span class="op">(</span></span>
<span>  <span class="va">str_formula</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  correct <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  num <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  table_caption <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  ref_correction <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  include_teststat <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  drop_unused_cats <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  PCTexcludeNA <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>str_formula</dt>
<dd><p>A string representing a formula, e.g.,
<code>"~ Sepal.Length + Sepal.Width | Species"</code> used to construct the
<code><a href="https://rdrr.io/pkg/table1/man/table1.html" class="external-link">table1</a></code>.</p></dd>


<dt>data</dt>
<dd><p>The dataset containing the variables for the table1 call
(all terms from the str_formula must be present)</p></dd>


<dt>correct</dt>
<dd><p>Character, default = NA; NA for no correction.
Currently available are "bonf" for
Bonferroni correction or "sidark" for Sidark correction. If you want any
other correction included just open an issue
&lt;https://github.com/Buedenbender/datscience/issues&gt; or contact me via mail.
Please see also the references and details on correction for multiple
comparison</p></dd>


<dt>num</dt>
<dd><p>Integer number of comparisons. If NA will be determined
automatically, by the number of terms in the formula</p></dd>


<dt>table_caption</dt>
<dd><p>Caption for the table, each element of the vector represents a new line.
The first line will be bold face. All additional lines are in italic.</p></dd>


<dt>ref_correction</dt>
<dd><p>Boolean, default = TRUE, if TRUE corrected p-Values will be referenced in
the foot note.</p></dd>


<dt>include_teststat</dt>
<dd><p>Boolean, default = TRUE, if TRUE includes two additional columns in the
table. 1) Test statistic (either t, f or X²) and 2) degrees of Freedom</p></dd>


<dt>drop_unused_cats</dt>
<dd><p>Boolean, default = TRUE, if TRUE categories (i.e., factor levels) with
0 observations will be dropped.</p></dd>


<dt>PCTexcludeNA</dt>
<dd><p>Boolean, default = TRUE, Should calculation of percentages include or
exclude Missings values. If PCTexcludeNA = TRUE, missings will be excluded.</p></dd>


<dt>...</dt>
<dd><p>(Optional), Additional arguments that can be passed to
<code><a href="format_flextable.html">format_flextable</a></code> (e.g., fontsize, font ...) or to
<code><a href="serialNext.html">serialNext</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code><a href="https://davidgohel.github.io/flextable/reference/flextable.html" class="external-link">flextable</a></code> object with APA ready correlation
  table. If a filepath is provided it also creates the respective file
  (e.g., a word .docx file)</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><strong>On Fisher's Exact Test (FET) vs Pearson's χ²-test</strong> <br>
    Newest feature (as of 07/22), according to an excellent post on
    cross-validated (Harrell 2011)

    the function refrains from using Fisher's exact test (FET) for
    categorical variables and only applies FET in the the rare case of cells
    with an expected cell frequencies do not exceed 1. This is due to the
    fact, that the FET can be extreme resource intensive (and slow), and can
    have type I error rates less than the nominal level
    (Crans and Shuster 2008)
 Contemporary evidence suggests, that
    Pearson s χ²-test with the modification of \(\frac{N-1}{N}\), nearly
    allways is more accurate than FET and generally recommended
    (Lydersen et al. 2009)
. Thus in accordance we use the N-1
    Pearson χ²-test proposed by (E.) Pearson and recommended as optimum test
    policy by (Campbell 2007)
.<br><br></p>
<p><strong>On Multiple Comparisons</strong> <br>
    Let me start with a direct quote
    "(..) <em>researchers should not automatically (mindlessly)
    assume that alpha adjustment is necessary during multiple testing.</em>"
    (Rubin 2021)
<br>
    Whether, how and when to correct for multiple comparison in inferential
    statistic, is still a an area of ongoing debate. However it was recently
    argued that it is essential to differentiate between different forms of
    multiple comparisons, to make the decision for or against a correction
    (Rubin 2021)
. The types of multiple testing are:</p><ul><li><p>disjunction testing</p></li>
<li><p>conjunction testing</p></li>
<li><p>individual testing</p></li>
</ul><p>Correction is primarly adequate in case of disjunction testing.
    Please refer to the very well written and laid out original publication
    for more details. For the use case of this function, one can assume
    a joint null hypotheses, being that Group A &lt;...&gt; Group N do not differ.
    Now for example, if it is sufficient that the groups differ significantly
    in one characteristic, this would be considered disjunction testing.<br>
    However, if we are only interested in the constituent (null-)hypotheses
    (e.g., the groups differ in their highest level of education vs. they
    differ in the current employment status), it could be categorized as
    individual testing. Please chose considerately for your individual case.
    However for the typical exploratory bivariate comparison in
    sociodemographic table1, I deem it to be frequently cases of individual
    testing, thus the <code>flex_table1()</code> function defaults
    to applying no correction.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Campbell I (2007).
“Chi-squared and Fisher–Irwin tests of two-by-two tables with small sample recommendations.”
<em>Statistics in Medicine</em>, <b>26</b>(19), 3661--3675.
ISSN 02776715, <a href="https://doi.org/10.1002/sim.2832" class="external-link">doi:10.1002/sim.2832</a>
, <a href="https://onlinelibrary.wiley.com/doi/10.1002/sim.2832" class="external-link">https://onlinelibrary.wiley.com/doi/10.1002/sim.2832</a>.<br><br> Crans GG, Shuster JJ (2008).
“How conservative is Fisher's exact test? A quantitative evaluation of the two‐sample comparative binomial trial.”
<em>Statistics in Medicine</em>, <b>27</b>(18), 3598--3611.
ISSN 02776715, <a href="https://doi.org/10.1002/sim.3221" class="external-link">doi:10.1002/sim.3221</a>
, <a href="https://onlinelibrary.wiley.com/doi/10.1002/sim.3221" class="external-link">https://onlinelibrary.wiley.com/doi/10.1002/sim.3221</a>.<br><br> Harrell F (2011).
“Is there ever a reason to do a chi-squared test rather than Fisher's exact test?”
Cross Validated.
URL:https://stats.stackexchange.com/q/14230 (version: 2021-01-26), https://stats.stackexchange.com/q/14230, <a href="https://stats.stackexchange.com/q/14230" class="external-link">https://stats.stackexchange.com/q/14230</a>.<br><br> Lydersen S, Fagerland MW, Laake P (2009).
“Recommended tests for association in 2×2 tables.”
<em>Statistics in Medicine</em>, <b>28</b>(7), 1159--1175.
ISSN 02776715, <a href="https://doi.org/10.1002/sim.3531" class="external-link">doi:10.1002/sim.3531</a>
, <a href="https://onlinelibrary.wiley.com/doi/10.1002/sim.3531" class="external-link">https://onlinelibrary.wiley.com/doi/10.1002/sim.3531</a>.<br><br> Rubin M (2021).
<em>When to adjust alpha during multiple testing : a consideration of disjunction , conjunction , and individual testing</em>,  number 0123456789.
Springer Netherlands.
ISBN 0123456789, <a href="https://doi.org/10.1007/s11229-021-03276-4" class="external-link">doi:10.1007/s11229-021-03276-4</a>
.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="format_flextable.html">format_flextable</a></code>,
<code><a href="https://davidgohel.github.io/flextable/reference/flextable.html" class="external-link">flextable</a></code>
<code><a href="https://rdrr.io/pkg/table1/man/table1.html" class="external-link">table1</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Bjoern Buedenbender</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="co"># Comparison of just two Groups</span></span></span>
<span class="r-in"><span>   <span class="va">str_formula</span> <span class="op">&lt;-</span> <span class="st">"~ Sepal.Length + Sepal.Width +test | Species"</span></span></span>
<span class="r-in"><span>   <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">Species</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"setosa"</span>, <span class="st">"versicolor"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="va">data</span><span class="op">$</span><span class="va">test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Female"</span>, <span class="st">"Male"</span><span class="op">)</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="va">table_caption</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Table 1"</span>, <span class="st">"A test on the Iris Data"</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="fu">flex_table1</span><span class="op">(</span><span class="va">str_formula</span>, data <span class="op">=</span> <span class="va">data</span>, table_caption <span class="op">=</span> <span class="va">table_caption</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Comparison of Multiple Groups (ANOVA)</span></span></span>
<span class="r-in"><span>   <span class="va">str_formula</span> <span class="op">&lt;-</span> <span class="st">"~ Sepal.Length + Sepal.Width + Gender_example | Species"</span></span></span>
<span class="r-in"><span>   <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">Species</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"setosa"</span>, <span class="st">"versicolor"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="va">data</span> <span class="op">&lt;-</span> <span class="va">iris</span></span></span>
<span class="r-in"><span>   <span class="va">data</span><span class="op">$</span><span class="va">Gender_example</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Female"</span>, <span class="st">"Male"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="va">table_caption</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Table 1"</span>, <span class="st">"A test on the Iris Data"</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="fu">flex_table1</span><span class="op">(</span><span class="va">str_formula</span>, data <span class="op">=</span> <span class="va">data</span>, table_caption <span class="op">=</span> <span class="va">table_caption</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Björn Büdenbender.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>


<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="datscience">
<title>Pretty Scree Plot with CIs for Eigenvalues  • datscience</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Pretty Scree Plot with CIs for Eigenvalues ">
<meta property="og:description" content="datscience">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">datscience</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/ScreePlot_ConfidenceIntervalls_ForObservedEigenvalues.html">Pretty Scree Plot with CIs for Eigenvalues </a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Buedenbender/datscience/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="ScreePlot_ConfidenceIntervalls_ForObservedEigenvalues_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="ScreePlot_ConfidenceIntervalls_ForObservedEigenvalues_files/tabwid-1.0.0/tabwid.css" rel="stylesheet">
<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Pretty Scree Plot with CIs for Eigenvalues </h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Buedenbender/datscience/blob/HEAD/vignettes/ScreePlot_ConfidenceIntervalls_ForObservedEigenvalues.Rmd" class="external-link"><code>vignettes/ScreePlot_ConfidenceIntervalls_ForObservedEigenvalues.Rmd</code></a></small>
      <div class="d-none name"><code>ScreePlot_ConfidenceIntervalls_ForObservedEigenvalues.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="purpose">Purpose<a class="anchor" aria-label="anchor" href="#purpose"></a>
</h2>
<p>Conducting a factor analysis (fa) or principale component analysis (pca) can be challenging. It starts with the choice between either <code>fa</code> or <code>pca</code>. And continues with the question on how many factors or components to retain. In this vignette we will look especially into the second question. How to determine the number of factors/components to retain with parallel analysis (HORN citation), and what this package provides to help with the process.Especially we will look into the possibility to add bootstrapped confidence intervals around the observed Eigenvalues.</p>
<div class="section level4">
<h4 id="recommended-reads">Recommended Reads<a class="anchor" aria-label="anchor" href="#recommended-reads"></a>
</h4>
<p>The following are helpful sources (e.g., on the question on how to determine the number of Factors / Components) <em>to be advanced, article citations</em></p>
<ul>
<li>
<a href="http://personality-project.org/r/psych/HowTo/factor.pdf" class="external-link">Tutorial</a> by William Revelle et al. on how to conduct a factor analysis with the psych package.</li>
</ul>
</div>
<div class="section level4">
<h4 id="example-output-a-pretty-scree-plot-added-cis">Example Output: A “Pretty” Scree-Plot + added CIs<a class="anchor" aria-label="anchor" href="#example-output-a-pretty-scree-plot-added-cis"></a>
</h4>
<p><em>to be inserted picture of the result</em></p>
</div>
</div>
<div class="section level2">
<h2 id="pretty-scree-with-cis-a-tutorial">“Pretty” Scree with CIs a Tutorial<a class="anchor" aria-label="anchor" href="#pretty-scree-with-cis-a-tutorial"></a>
</h2>
<p>Below you find a step-by-step tutorial in just 4 easy steps on how to create bootstrapped confidence intervals (CIs) around the observed Eigenvalues in parallel analysis.</p>
<div class="section level3">
<h3 id="preparation-and-example-data">1. Preparation and Example Data<a class="anchor" aria-label="anchor" href="#preparation-and-example-data"></a>
</h3>
<p>This first section will setup the necessary packages and provide a first glance at the example survey data (on personality) we will need for the tutorial.</p>
<div class="section level5">
<h5 id="loading-packages">Loading Packages<a class="anchor" aria-label="anchor" href="#loading-packages"></a>
</h5>
<p>We start by loading all required packages. For this vignette we will use the following packages:</p>
<ul>
<li>
<a href="https://buedenbender.github.io/datscience/index.html"><code>datscience</code></a>,</li>
<li><a href="https://dplyr.tidyverse.org/" class="external-link"><code>dplyr</code></a></li>
<li><a href="https://davidgohel.github.io/flextable/" class="external-link"><code>flextable</code></a></li>
<li><a href="https://cran.r-project.org/web/packages/psych/psych.pdf" class="external-link"><code>psych</code></a></li>
</ul>
<p>I personally like <a href="https://www.rdocumentation.org/packages/pacman/versions/0.5.1" class="external-link"><code>pacman</code></a> package manager for loading libraries in R. But that’s up to your preference, you might as well just you <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code> instead</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html" class="external-link">p_load</a></span><span class="op">(</span><span class="va">datscience</span>, <span class="va">psych</span>, <span class="va">dplyr</span>, <span class="va">flextable</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level5">
<h5 id="example-data">Example Data<a class="anchor" aria-label="anchor" href="#example-data"></a>
</h5>
<p>We will use the <code>bfi</code> data, that comes with the <code>psych</code> package as an example here. The data set contains information on <span class="math inline">\(k = 25\)</span> items from a Big Five personality questionnaire and additional <span class="math inline">\(k = 3\)</span> items on sociodemograhpic data from <span class="math inline">\(n = 2800\)</span> participants. More details can be obtained with <code>?bfi</code>.</p>
<p>For this vignette we will just use the 10 items on agreeableness and extraversion, and sample randomly 300 participants in order to improve the run time. Below you can get first insights into the data.frame. For the overview we used the <a href="https://buedenbender.github.io/datscience/reference/format_flextable.html"><code>datscience::format_flextable</code></a> function for the apperance of the table.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span> <span class="co"># necessary for reproducible results</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">bfi</span><span class="op">)</span>
<span class="co"># Select only agreeableness and extraversion and sample participants</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">bfi</span> <span class="op">%&gt;%</span>  
    <span class="fu">select</span><span class="op">(</span><span class="fu">matches</span><span class="op">(</span><span class="st">"^(E\\d|A\\d)"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="co"># Regex run down </span>
  <span class="co">#   ^ : starts with</span>
  <span class="co">#   (|) : Logical or</span>
  <span class="co">#   E\\d: E followed by any digit, e.g. E3 matches E\\d</span>
  <span class="co">#   A\\d: A followed by any digit, e.g. A5 matches E\\d</span>
  <span class="fu">sample_n</span><span class="op">(</span><span class="fl">300</span><span class="op">)</span>
  
<span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="co">#&gt; [1] 300  10</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="co">#&gt; 'data.frame':    300 obs. of  10 variables:</span>
<span class="co">#&gt;  $ A1: int  6 1 4 1 2 3 1 1 2 3 ...</span>
<span class="co">#&gt;  $ A2: int  4 5 5 5 4 6 6 6 5 4 ...</span>
<span class="co">#&gt;  $ A3: int  4 5 5 3 4 4 6 5 5 3 ...</span>
<span class="co">#&gt;  $ A4: int  1 4 3 6 4 6 6 6 6 6 ...</span>
<span class="co">#&gt;  $ A5: int  6 4 5 6 3 5 6 5 5 3 ...</span>
<span class="co">#&gt;  $ E1: int  2 1 1 4 5 5 1 3 4 5 ...</span>
<span class="co">#&gt;  $ E2: int  4 2 1 2 5 2 1 2 2 4 ...</span>
<span class="co">#&gt;  $ E3: int  3 4 5 2 3 4 5 1 5 2 ...</span>
<span class="co">#&gt;  $ E4: int  3 5 6 5 3 5 6 4 6 3 ...</span>
<span class="co">#&gt;  $ E5: int  1 4 5 2 3 5 5 1 5 3 ...</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="co">#&gt; [1] "data.frame"</span>
<span class="va">df</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">flextable</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">datscience</span><span class="fu">::</span><span class="fu"><a href="../reference/format_flextable.html">format_flextable</a></span><span class="op">(</span>table_caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Table 1"</span>, 
                                                 <span class="st">"Glimpse at the First 5 Rows of Shortened bfi Data"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<template id="ee0f0e38-1bfe-4996-9a76-ac9a7d56dba2"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style>
<div class="tabwid">
<style>.cl-c20f164a{table-layout:auto;width:0%;}.cl-c2098194{font-family:'Times New Roman';font-size:12pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-c209819e{font-family:'Times New Roman';font-size:12pt;font-weight:normal;font-style:italic;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-c20981a8{font-family:'Times New Roman';font-size:12pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-c2099468{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-c209d496{background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c209d4a0{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-c209d4a1{background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style>
<table class="table cl-c20f164a">
<thead>
<tr style="overflow-wrap:break-word;"><td colspan="10" class="cl-c209d4a1"><p class="cl-c2099468"><span class="cl-c2098194">Table 1</span></p></td></tr>
<tr style="overflow-wrap:break-word;"><td colspan="10" class="cl-c209d4a1"><p class="cl-c2099468"><span class="cl-c209819e">Glimpse at the First 5 Rows of Shortened bfi Data</span></p></td></tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-c209d4a1"><p class="cl-c2099468"><span class="cl-c20981a8">A1</span></p></td>
<td class="cl-c209d4a1"><p class="cl-c2099468"><span class="cl-c20981a8">A2</span></p></td>
<td class="cl-c209d4a1"><p class="cl-c2099468"><span class="cl-c20981a8">A3</span></p></td>
<td class="cl-c209d4a1"><p class="cl-c2099468"><span class="cl-c20981a8">A4</span></p></td>
<td class="cl-c209d4a1"><p class="cl-c2099468"><span class="cl-c20981a8">A5</span></p></td>
<td class="cl-c209d4a1"><p class="cl-c2099468"><span class="cl-c20981a8">E1</span></p></td>
<td class="cl-c209d4a1"><p class="cl-c2099468"><span class="cl-c20981a8">E2</span></p></td>
<td class="cl-c209d4a1"><p class="cl-c2099468"><span class="cl-c20981a8">E3</span></p></td>
<td class="cl-c209d4a1"><p class="cl-c2099468"><span class="cl-c20981a8">E4</span></p></td>
<td class="cl-c209d4a1"><p class="cl-c2099468"><span class="cl-c20981a8">E5</span></p></td>
</tr>
</thead>
<tbody>
<tr style="overflow-wrap:break-word;">
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">6</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">4</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">4</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">1</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">6</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">2</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">4</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">3</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">3</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">1</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">1</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">5</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">5</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">4</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">4</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">1</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">2</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">4</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">5</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">4</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">4</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">5</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">5</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">3</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">5</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">1</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">1</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">5</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">6</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">5</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">1</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">5</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">3</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">6</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">6</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">4</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">2</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">2</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">5</span></p></td>
<td class="cl-c209d496"><p class="cl-c2099468"><span class="cl-c20981a8">2</span></p></td>
</tr>
<tr style="overflow-wrap:break-word;">
<td class="cl-c209d4a0"><p class="cl-c2099468"><span class="cl-c20981a8">2</span></p></td>
<td class="cl-c209d4a0"><p class="cl-c2099468"><span class="cl-c20981a8">4</span></p></td>
<td class="cl-c209d4a0"><p class="cl-c2099468"><span class="cl-c20981a8">4</span></p></td>
<td class="cl-c209d4a0"><p class="cl-c2099468"><span class="cl-c20981a8">4</span></p></td>
<td class="cl-c209d4a0"><p class="cl-c2099468"><span class="cl-c20981a8">3</span></p></td>
<td class="cl-c209d4a0"><p class="cl-c2099468"><span class="cl-c20981a8">5</span></p></td>
<td class="cl-c209d4a0"><p class="cl-c2099468"><span class="cl-c20981a8">5</span></p></td>
<td class="cl-c209d4a0"><p class="cl-c2099468"><span class="cl-c20981a8">3</span></p></td>
<td class="cl-c209d4a0"><p class="cl-c2099468"><span class="cl-c20981a8">3</span></p></td>
<td class="cl-c209d4a0"><p class="cl-c2099468"><span class="cl-c20981a8">3</span></p></td>
</tr>
</tbody>
</table>
</div></template><div class="flextable-shadow-host" id="6f71a49f-b613-4e73-b351-6bb618224a44"></div>
<script>
var dest = document.getElementById("6f71a49f-b613-4e73-b351-6bb618224a44");
var template = document.getElementById("ee0f0e38-1bfe-4996-9a76-ac9a7d56dba2");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>
</div>
</div>
<div class="section level3">
<h3 id="running-a-parallel-analysis">2. Running a Parallel Analysis<a class="anchor" aria-label="anchor" href="#running-a-parallel-analysis"></a>
</h3>
<p>The psych package makes it pretty convenient to conduct a parallel analysis. The <code>fa</code> parameter allows you to specify if you want to run a principal component analysis (<code>fa = "pca"</code>), or a factor analysis (<code>fa = "fa"</code>) or both (<code>fa = "both"</code>). As we want to showcase CI for the observed Eigenvalues for both method we chose “both” here.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Run a Parallel Analysis (Horn, 1965) with psych pacakge and save the parallel object</span>
<span class="va">parallel_analysis</span> <span class="op">&lt;-</span> <span class="fu">psych</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/psych/man/fa.parallel.html" class="external-link">fa.parallel</a></span><span class="op">(</span><span class="va">df</span>, fa<span class="op">=</span><span class="st">"both"</span><span class="op">)</span></code></pre></div>
<p><img src="ScreePlot_ConfidenceIntervalls_ForObservedEigenvalues_files/figure-html/setup-1.png" width="700"></p>
<pre><code><span class="co">#&gt; Parallel analysis suggests that the number of factors =  3  and the number of components =  2</span></code></pre>
</div>
<div class="section level3">
<h3 id="create-bootstrapped-confidence-intervals-for-observed-eigenvalues">3. Create Bootstrapped Confidence Intervals for observed Eigenvalues<a class="anchor" aria-label="anchor" href="#create-bootstrapped-confidence-intervals-for-observed-eigenvalues"></a>
</h3>
<p>To get bootstrapped Eigenvalues we just use two functions from the <code>datscience</code> package. First we need to create a <code>boot</code> object with <code><a href="../reference/booted_eigenvalues.html">booted_eigenvalues()</a></code>, additionally supplying the method (either <code>pc</code> or <code>fa</code>) and the data.frame. Afterwards we will extract the confidence interval (CI) with the function <code>getCIs</code> by passing the boot object.</p>
<div class="section level4">
<h4 id="bootstrapped-cis-for-pca">3.1 Bootstrapped CIs for PCA<a class="anchor" aria-label="anchor" href="#bootstrapped-cis-for-pca"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">PCA_bootObj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/booted_eigenvalues.html">booted_eigenvalues</a></span><span class="op">(</span><span class="va">df</span>, iterations <span class="op">=</span> <span class="fl">500</span>, fa <span class="op">=</span> <span class="st">"pc"</span><span class="op">)</span>
<span class="va">PCA_bootObj</span>

<span class="va">PCA_CIs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCIs.html">getCIs</a></span><span class="op">(</span><span class="va">PCA_bootObj</span><span class="op">)</span>
<span class="va">PCA_CIs</span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="efa-eigenvalues-cis">EFA Eigenvalues CIs<a class="anchor" aria-label="anchor" href="#efa-eigenvalues-cis"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">EFA_bootObj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/booted_eigenvalues.html">booted_eigenvalues</a></span><span class="op">(</span><span class="va">df</span>, iterations <span class="op">=</span> <span class="fl">500</span>, fa <span class="op">=</span> <span class="st">"fa"</span><span class="op">)</span>
<span class="va">EFA_bootObj</span>

<span class="va">EFA_CIs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCIs.html">getCIs</a></span><span class="op">(</span><span class="va">EFA_bootObj</span><span class="op">)</span>
<span class="va">EFA_bootObj</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plotting">4. Plotting<a class="anchor" aria-label="anchor" href="#plotting"></a>
</h3>
<div class="section level4">
<h4 id="create-pretty-scree-plot">4.1 Create Pretty Scree Plot<a class="anchor" aria-label="anchor" href="#create-pretty-scree-plot"></a>
</h4>
<p>The output of the <code><a href="https://rdrr.io/pkg/psych/man/fa.parallel.html" class="external-link">psych::fa.parallel</a></code> can be easily beautified by the <code>pretty_scree</code> function (below we exemplarily showcase the pretty scree for pca).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">PCA_Plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pretty_scree.html">pretty_scree</a></span><span class="op">(</span><span class="va">parallel_analysis</span>,fa<span class="op">=</span><span class="st">"pc"</span><span class="op">)</span>
<span class="va">EFA_Plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pretty_scree.html">pretty_scree</a></span><span class="op">(</span><span class="va">parallel_analysis</span>,fa<span class="op">=</span><span class="st">"fa"</span><span class="op">)</span>

<span class="va">PCA_Plot</span></code></pre></div>
<p><img src="ScreePlot_ConfidenceIntervalls_ForObservedEigenvalues_files/figure-html/prettyscree-1.png" width="700"></p>
</div>
</div>
<div class="section level3">
<h3 id="adding-confidence-intervals-for-observed-eigenvalues">4.2 Adding Confidence Intervals for Observed Eigenvalues<a class="anchor" aria-label="anchor" href="#adding-confidence-intervals-for-observed-eigenvalues"></a>
</h3>
<p>Adding the obtained CIs to the plot is also pretty easy with the function <code><a href="../reference/add_ci_2plot.html">add_ci_2plot()</a></code>. You can either chose to display the CIs as bands (with <code>type = "band"</code> or as error bars with <code>type = "errorbars"</code> )</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">EFA_Plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_ci_2plot.html">add_ci_2plot</a></span><span class="op">(</span><span class="va">EFA_Plot</span>,<span class="va">EFA_CIs</span>,type<span class="op">=</span><span class="st">"band"</span><span class="op">)</span>
<span class="va">PCA_Plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_ci_2plot.html">add_ci_2plot</a></span><span class="op">(</span><span class="va">PCA_Plot</span>,<span class="va">PCA_CIs</span>,type<span class="op">=</span><span class="st">"errorbars"</span><span class="op">)</span>

<span class="va">EFA_Plot</span></code></pre></div>
<p><img src="ScreePlot_ConfidenceIntervalls_ForObservedEigenvalues_files/figure-html/addCIs-1.png" width="700"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">PCA_Plot</span></code></pre></div>
<p><img src="ScreePlot_ConfidenceIntervalls_ForObservedEigenvalues_files/figure-html/addCIs-2.png" width="700"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Björn Büdenbender.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
